(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"215":function(e,t,n){},"274":function(e,t,n){"use strict";n.r(t);var a=n(1),o=n(2),r=n(275),i=n(276),l=n(84),c=n(23),s=n(14),u=n(298),m=n(270),f=n(131),p=n(277),d=n(279),_=n(230),b=n(268),h=n(280),y=n(133),v=n(281),E=n(282),C=n(231),N=n(232),g=n(269),O=n(233),w=n(6),k=n(91),j=(n(215),function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],a=!0,o=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),x=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),D=function get(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if("value"in a)return a.value;var r=a.get;return void 0!==r?r.call(n):void 0};function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var P=[{"title":"信息"},{"title":"目录"},{"title":"评论"}],L=function(e){function CourseDetail(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CourseDetail);for(var a=arguments.length,o=Array(a),r=0;r<a;r++)o[r]=arguments[r];return t=n=_possibleConstructorReturn(this,(e=CourseDetail.__proto__||Object.getPrototypeOf(CourseDetail)).call.apply(e,[this].concat(o))),n.config={"navigationBarTitleText":"课程详情"},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(CourseDetail,o["a"].Component),x(CourseDetail,[{"key":"render","value":function render(){var e=this,t=this.props.mineStore,n=void 0===t?{}:t,c=n.courseDetail,x=void 0===c?{}:c,D=o.a.useRouter(),L=o.a.useState(0),S=j(L,2),T=S[0],R=S[1],B=o.a.useState(""),M=j(B,2),I=M[0],A=M[1],H=o.a.useState(!1),z=j(H,2),F=z[0],J=z[1],V=o.a.useState(""),G=j(V,2),q=G[0],K=G[1],Q=Object(r.a)("video",this),U={"height":Object(i.a)().windowHeight-325-5+"px"};function handleClick(e,t){"heart"===e?Object(w.c)({"comment_id":t.id,"heart":!t.heart}).then(function(){showToast((t.heart?"取消":"")+"收藏成功"),updateCommentList()}):"star"===e&&Object(w.c)({"comment_id":t.id,"star":!t.star}).then(function(){showToast((t.heart?"取消":"")+"点赞成功"),updateCommentList()})}function updateCommentList(){n.getCommentList({"id":D.params.id})}function hideModal(){K(""),J(!1)}function showToast(e){Object(l.a)({"title":e,"icon":"none"})}return o.a.useEffect(function(){n.getCourseDetail(D.params.id)},[D.params.id]),o.a.useEffect(function(){x.url&&A(x.url)},[x]),o.a.useEffect(function(){I&&Q&&Q.play()},[I]),o.a.useEffect(function(){1===T?n.getChapterList({"id":D.params.id}):2===T&&updateCommentList()},[T]),a.l.createElement(k.a,{"title":"课程详情"},a.l.createElement(s.a,{"className":"course-detail__content"},a.l.createElement(s.a,{"className":"video-box"},a.l.createElement(u.a,{"src":I,"controls":!0,"poster":x.cover,"id":"video","enablePlayGesture":!0,"x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x5-video-orientation":"landscape","objectFit":"cover","onEnded":function handleEnded(){var e=n.chapterList,t=void 0===e?[]:e,a=t.findIndex(function(e){return e.url===I});a+1<t.length&&A(t[a+1].url)},"ref":function ref(t){e.__taroref_video=t}})),a.l.createElement(p.a,{"current":T,"tabList":P,"onClick":function onClick(e){return R(e)},"className":"tab-content","swipeable":!1},a.l.createElement(d.a,{"className":"tab-content-item","current":T,"index":0},a.l.createElement(s.a,{"className":"info-box","style":U},a.l.createElement(s.a,{"className":"info-item"},a.l.createElement(s.a,{"className":"info-item__label"},"作品名称："),a.l.createElement(s.a,{"className":"info-item__detail"},x.name)),a.l.createElement(s.a,{"className":"info-item"},a.l.createElement(s.a,{"className":"info-item__label"},"风格："),a.l.createElement(s.a,{"className":"info-item__detail"},x.style)),a.l.createElement(s.a,{"className":"info-item"},a.l.createElement(s.a,{"className":"info-item__label"},"地区："),a.l.createElement(s.a,{"className":"info-item__detail"},x.region)),a.l.createElement(s.a,{"className":"info-item"},a.l.createElement(s.a,{"className":"info-item__label"},"开播时间："),a.l.createElement(s.a,{"className":"info-item__detail"},x.time)),a.l.createElement(s.a,{"className":"info-item"},a.l.createElement(s.a,{"className":"info-item__label"},"声优："),a.l.createElement(s.a,{"className":"info-item__detail"},x.voice_actor)),a.l.createElement(s.a,{"className":"info-item"},a.l.createElement(s.a,{"className":"info-item__label"},"简介："),a.l.createElement(s.a,{"className":"info-item__detail"},x.brief)))),a.l.createElement(d.a,{"className":"tab-content-item","current":T,"index":1},a.l.createElement(s.a,{"className":"chapter-box","style":U},a.l.createElement(_.a,null,n.chapterList&&n.chapterList.map(function(e,t){return a.l.createElement(b.a,{"key":t,"title":e.title,"arrow":"right","thumb":"https://img12.360buyimg.com/jdphoto/s72x72_jfs/t6160/14/2008729947/2754/7d512a86/595c3aeeNa89ddf71.png","onClick":function onClick(){return A(e.url)},"extraText":I===e.url?"播放中...":""})})))),a.l.createElement(d.a,{"className":"tab-content-item","current":T,"index":2},a.l.createElement(s.a,{"className":"comment-box","style":U},n.commentList&&n.commentList.map(function(e,t){return a.l.createElement(s.a,{"key":t,"className":"comment-box-item"},a.l.createElement(s.a,{"className":"comment-box-item__top"},a.l.createElement(m.a,{"className":"comment-box-item__avatar","mode":"widthFix","src":e.avatar}),a.l.createElement(s.a,{"className":"comment-box-item__info"},a.l.createElement(s.a,{"className":"comment-box-item__name"},e.name),a.l.createElement(s.a,{"className":"comment-box-item__time"},e.createdAt&&e.createdAt.substr(0,10)))),a.l.createElement(s.a,{"className":"comment-box-item__cont"},e.content),a.l.createElement(s.a,{"className":"comment-box-item__bottom"},a.l.createElement(h.a,{"value":e.heartSum||"","maxValue":99},a.l.createElement(y.a,{"className":"comment-box-item__icon","value":e.heart?"heart-2":"heart","size":"20","color":"#ab2b2b","onClick":function onClick(){return handleClick("heart",e)}})),a.l.createElement(h.a,{"value":e.starSum||"","maxValue":99},a.l.createElement(y.a,{"className":"comment-box-item__icon","value":e.star?"star-2":"star","size":"20","color":"#ffca3e","onClick":function onClick(){return handleClick("star",e)}}))))})))),2===T?a.l.createElement(s.a,{"className":"comment-edit__btn"},a.l.createElement(v.a,{"onClick":function onClick(){return J(!0)}},a.l.createElement(y.a,{"className":"at-fab__icon","value":"edit","size":"22"}))):null),a.l.createElement(E.a,{"isOpened":F},a.l.createElement(C.a,null,"评论"),a.l.createElement(N.a,null,a.l.createElement(g.a,{"value":q,"onChange":function onChange(e){return K(e)},"maxLength":200,"placeholder":"你的评论是..."})),a.l.createElement(O.a,null,a.l.createElement(f.a,{"onClick":hideModal},"取消"),a.l.createElement(f.a,{"onClick":function handleSubmit(){Object(w.a)({"course_id":D.params.id,"content":q}).then(function(){showToast("评论成功"),updateCommentList(),hideModal()})}},"确定"))))}},{"key":"componentDidMount","value":function componentDidMount(){D(CourseDetail.prototype.__proto__||Object.getPrototypeOf(CourseDetail.prototype),"componentDidMount",this)&&D(CourseDetail.prototype.__proto__||Object.getPrototypeOf(CourseDetail.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){D(CourseDetail.prototype.__proto__||Object.getPrototypeOf(CourseDetail.prototype),"componentDidShow",this)&&D(CourseDetail.prototype.__proto__||Object.getPrototypeOf(CourseDetail.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){D(CourseDetail.prototype.__proto__||Object.getPrototypeOf(CourseDetail.prototype),"componentDidHide",this)&&D(CourseDetail.prototype.__proto__||Object.getPrototypeOf(CourseDetail.prototype),"componentDidHide",this).call(this)}}]),CourseDetail}();L.config={"navigationBarTitleText":"课程详情"},t.default=Object(c.b)("mineStore")(Object(c.c)(L))},"89":function(e,t,n){},"90":function(e,t,n){},"91":function(e,t,n){"use strict";var a=n(2),o=n(1),r=n(14),i=(n(89),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var l=function(e){function NavBar(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,NavBar),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(NavBar.__proto__||Object.getPrototypeOf(NavBar)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(NavBar,a["a"].Component),i(NavBar,[{"key":"render","value":function render(){var e=this.props,t=e.title,n=void 0===t?"":t,i=e.onRightClick,l=void 0===i?function(){}:i,c=e.rightIcon;return o.l.createElement(r.a,{"className":"nav-bar-comp"},o.l.createElement(r.a,{"className":"icon icon-return","onClick":function onClick(){return a.a.navigateBack()}}),o.l.createElement(r.a,null,n),c?o.l.createElement(r.a,{"className":"icon "+c,"onClick":function onClick(){return l()}}):o.l.createElement(r.a,{"className":"icon"}))}}]),NavBar}(),c=(n(90),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var s=function(e){function Layout(){return function Layout_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Layout),function Layout_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Layout.__proto__||Object.getPrototypeOf(Layout)).apply(this,arguments))}return function Layout_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Layout,a["a"].Component),c(Layout,[{"key":"render","value":function render(){var e=this.props,t=e.children,n=e.title,a=void 0===n?"":n,i=e.rightIcon,c=e.onRightClick;return o.l.createElement(r.a,{"className":"layout-content"},o.l.createElement(l,{"title":a,"rightIcon":i,"onRightClick":c}),o.l.createElement(r.a,{"className":"layout-content__children","style":{}},t))}}]),Layout}();t.a=s}}]);